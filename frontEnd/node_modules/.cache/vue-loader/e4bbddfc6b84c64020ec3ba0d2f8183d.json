{"remainingRequest":"F:\\workshop-final-project\\workshop-final-project\\frontEnd\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\workshop-final-project\\workshop-final-project\\frontEnd\\src\\views\\admin\\users\\edit.vue?vue&type=script&lang=ts&","dependencies":[{"path":"F:\\workshop-final-project\\workshop-final-project\\frontEnd\\src\\views\\admin\\users\\edit.vue","mtime":1629219280042},{"path":"F:\\workshop-final-project\\workshop-final-project\\frontEnd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\workshop-final-project\\workshop-final-project\\frontEnd\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\workshop-final-project\\workshop-final-project\\frontEnd\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"F:\\workshop-final-project\\workshop-final-project\\frontEnd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\workshop-final-project\\workshop-final-project\\frontEnd\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KaW1wb3J0IHsgQ29tcG9uZW50LCBNaXhpbnMsIFZ1ZSB9IGZyb20gInZ1ZS1wcm9wZXJ0eS1kZWNvcmF0b3IiOw0KaW1wb3J0IHsgQmFzZUZvcm1FZGl0TWl4aW4gfSBmcm9tICJAL21peGlucyI7DQppbXBvcnQgeyBVc2VyIH0gZnJvbSAiQC9jb3JlL21vZGVsIjsNCmltcG9ydCB7IEZpbGVTZXJ2aWNlIH0gZnJvbSAiQC9jb3JlL3NlcnZpY2VzIjsNCmltcG9ydCBDaGFuZ2VQYXNzd29yZCBmcm9tICJAL2NvbXBvbmVudHMvYXV0aC9jaGFuZ2UtcGFzc3dvcmQudnVlIjsNCg0KQENvbXBvbmVudCh7DQogIGNvbXBvbmVudHM6ew0KICAgICdjaGFuZ2UtcGFzc3dvcmQnOkNoYW5nZVBhc3N3b3JkDQogIH0NCn0pDQpleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VyRWRpdENvbXBvbmVudCBleHRlbmRzIE1peGluczxCYXNlRm9ybUVkaXRNaXhpbjxVc2VyPj4oDQogIEJhc2VGb3JtRWRpdE1peGluDQopIHsNCiAgZmlsZVNlcnZpY2UgPSBuZXcgRmlsZVNlcnZpY2UoKTsNCiAgdXBsb2FkaW5nID0gZmFsc2U7DQogIHN1Y2Nlc3NVcGxvYWQgPSBmYWxzZTsNCiAgZXJyb3JVcGxvYWQgPSBmYWxzZTsNCiAgaW1hZ2VVcmwgPSByZXF1aXJlKCJAL2Fzc2V0cy9zeC1sb2dvLnBuZyIpOw0KDQogIGlzQWN0aXZlQ2hhbmdlUGFzc3dvcmRNb2RhbCA9IGZhbHNlOw0KICBjb25zdHJ1Y3RvcigpIHsNCiAgICBzdXBlcigpOw0KICAgIHRoaXMuY29udHJvbGxlciA9ICJVc2VyIjsNCiAgICB0aGlzLm1vZGVsID0gbmV3IFVzZXIoKTsNCiAgfQ0KICBhc3luYyBzZWxlY3RGaWxlKHNlbGVjdGVkOiBGaWxlKSB7DQogICAgdHJ5IHsNCiAgICAgIHRoaXMudXBsb2FkaW5nID0gdHJ1ZTsNCiAgICAgIGNvbnN0IGRvY3VtZW50ID0gYXdhaXQgdGhpcy5maWxlU2VydmljZS51cGxvYWQoc2VsZWN0ZWQpOw0KICAgICAgdGhpcy5tb2RlbC5waG90byA9IGRvY3VtZW50LmRhdGE7DQogICAgICB0aGlzLmltYWdlVXJsID0gdGhpcy5maWxlU2VydmljZS5nZXRQdWJsaWNVcmwoDQogICAgICAgIHRoaXMubW9kZWwucGhvdG8uZmlsZU5hbWUsDQogICAgICAgIHRoaXMubW9kZWwucGhvdG8uY29udGVudFR5cGUNCiAgICAgICk7DQogICAgICB0aGlzLnN1Y2Nlc3NVcGxvYWQgPSB0cnVlOw0KICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICB0aGlzLmVycm9yVXBsb2FkID0gdHJ1ZTsNCiAgICAgIHRoaXMuaW1hZ2VVcmwgPSByZXF1aXJlKCJAL2Fzc2V0cy9zeC1sb2dvLnBuZyIpOw0KICAgICAgdGhpcy5vcGVyYXRpb25GYWlsZWQoIkVycm9yIGFsIGVudmlhciBmb3RvIGFsIHNlcnZpZG9yIik7DQogICAgfSBmaW5hbGx5IHsNCiAgICAgIHRoaXMudXBsb2FkaW5nID0gZmFsc2U7DQogICAgfQ0KICB9DQoNCiAgYXN5bmMgZ2V0RGF0YSgpIHsNCiAgICB0cnkgew0KICAgICAgaWYgKHRoaXMubW9kZWxUb0VkaXQgJiYgIXRoaXMubG9hZEZyb21BUEkpDQogICAgICAgIHRoaXMubW9kZWwgPSB0aGlzLm1hcDxVc2VyPih0aGlzLm1vZGVsVG9FZGl0KTsNCiAgICAgIGVsc2Ugew0KICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOw0KICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VydmljZS5nZXRCeUlkKHRoaXMuaWQpOw0KICAgICAgICB0aGlzLm1vZGVsID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgICAgdGhpcy5tb2RlbC5kb2IgPSBuZXcgRGF0ZSh0aGlzLm1vZGVsLmRvYiBhcyBzdHJpbmcpOw0KICAgICAgfQ0KICAgICAgdGhpcy5tb2RlbEluaXQgPSB0aGlzLm1hcDxVc2VyPih0aGlzLm1vZGVsKTsNCiAgICB9IGNhdGNoIChlcnJvcnMpIHsNCiAgICAgIHRoaXMub3BlcmF0aW9uRmFpbGVkRXJyb3JzKGVycm9ycyk7DQogICAgfSBmaW5hbGx5IHsNCiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqVA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"edit.vue","sourceRoot":"src/views/admin/users","sourcesContent":["<template>\r\n  <section>\r\n    <nav class=\"navbar\">\r\n      <div class=\"navbar-brand\">\r\n        <span class=\"navbar-item title is-2\">Editar usuario</span>\r\n      </div>\r\n      <div class=\"navbar-end\">\r\n        <div class=\"navbar-item\">\r\n          <div class=\"field\">\r\n            <b-switch type=\"is-twitter\" v-model=\"exitOnSave\"\r\n              >Salir al guardar</b-switch\r\n            >\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n    <b-loading :is-full-page=\"false\" :active=\"loading || saving\"></b-loading>\r\n\r\n    <form @submit.prevent=\"validate\">\r\n      <b-collapse class=\"card\" animation=\"slide\" aria-id=\"contentIdFor\">\r\n        <template #trigger=\"props\">\r\n          <div class=\"card-header\" role=\"button\" aria-controls=\"contentIdFor\">\r\n            <p class=\"card-header-title\">Datos de usuario</p>\r\n            <a class=\"card-header-icon\">\r\n              <b-icon :icon=\"props.open ? 'menu-down' : 'menu-up'\"> </b-icon>\r\n            </a>\r\n          </div>\r\n        </template>\r\n\r\n        <div class=\"card-content\">\r\n          <div class=\"content\">\r\n            <div class=\"columns\">\r\n              <div class=\"column is-4\">\r\n                <b-field>\r\n                  <b-upload\r\n                    v-show=\"!successUpload\"\r\n                    @input=\"selectFile\"\r\n                    drag-drop\r\n                    expanded\r\n                  >\r\n                    <section class=\"section p-2rem\">\r\n                      <div class=\"content has-text-centered\">\r\n                        <p>\r\n                          <b-icon icon=\"upload\" size=\"is-large\"></b-icon>\r\n                        </p>\r\n                        <p>Drop your files here or click to upload</p>\r\n                      </div>\r\n                    </section>\r\n                  </b-upload>\r\n                  <b-image\r\n                    class=\"image-is-350x210\"\r\n                    v-show=\"successUpload\"\r\n                    :src=\"imageUrl\"\r\n                    alt=\"A random image\"\r\n                  ></b-image>\r\n                </b-field>\r\n                <b-field class=\"file\">\r\n                  <b-upload @input=\"selectFile\" expanded>\r\n                    <b-button\r\n                      type=\"is-primary\"\r\n                      expanded\r\n                      v-if=\"uploading\"\r\n                      loading\r\n                      >Subiendo...</b-button\r\n                    >\r\n                    <a v-else class=\"button is-primary is-fullwidth\">\r\n                      <b-icon icon=\"upload\"></b-icon>\r\n                      <span>Cargar foto</span>\r\n                    </a>\r\n                  </b-upload>\r\n                </b-field>\r\n              </div>\r\n              <div class=\"column\">\r\n                <b-field\r\n                  label=\"Nombre de usuario*\"\r\n                  :type=\"{ 'is-danger': errors.has('username') }\"\r\n                  :message=\"errors.first('username')\"\r\n                >\r\n                  <p>{{ model.userName }}</p>\r\n                </b-field>\r\n\r\n                <b-field label=\"Contraseña*\">\r\n                  <b-button @click=\"isActiveChangePasswordModal = true\" icon-left=\"lock\" outlined type=\"is-primary\"\r\n                    >Cambiar contraseña</b-button\r\n                  >\r\n                </b-field>\r\n\r\n                <b-field\r\n                  label=\"Rol*\"\r\n                  :type=\"{ 'is-danger': errors.has('role') }\"\r\n                  :message=\"errors.first('role')\"\r\n                >\r\n                  <b-radio\r\n                    v-model=\"model.userRole\"\r\n                    name=\"role\"\r\n                    data-vv-as=\"rol\"\r\n                    v-validate=\"'required'\"\r\n                    :native-value=\"0\"\r\n                  >\r\n                    Administrador\r\n                  </b-radio>\r\n                  <b-radio\r\n                    v-model=\"model.userRole\"\r\n                    name=\"role\"\r\n                    data-vv-as=\"rol\"\r\n                    v-validate=\"'required'\"\r\n                    :native-value=\"1\"\r\n                  >\r\n                    Usuario\r\n                  </b-radio>\r\n                </b-field>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </b-collapse>\r\n      <br />\r\n      <b-collapse class=\"card\" animation=\"slide\" aria-id=\"contentIdForA11y3\">\r\n        <template #trigger=\"props\">\r\n          <div\r\n            class=\"card-header\"\r\n            role=\"button\"\r\n            aria-controls=\"contentIdForA11y3\"\r\n          >\r\n            <p class=\"card-header-title\">Datos personales</p>\r\n            <a class=\"card-header-icon\">\r\n              <b-icon :icon=\"props.open ? 'menu-down' : 'menu-up'\"> </b-icon>\r\n            </a>\r\n          </div>\r\n        </template>\r\n\r\n        <div class=\"card-content\">\r\n          <div class=\"content\">\r\n            <div class=\"columns is-multiline\">\r\n              <div class=\"column\">\r\n                <b-field\r\n                  label=\"Nombre*\"\r\n                  :type=\"{ 'is-danger': errors.has('name') }\"\r\n                  :message=\"errors.first('name')\"\r\n                >\r\n                  <b-input\r\n                    v-model=\"model.name\"\r\n                    name=\"name\"\r\n                    data-vv-as=\"nombre\"\r\n                    v-validate=\"'required'\"\r\n                    placeholder=\"Requerido\"\r\n                  />\r\n                </b-field>\r\n              </div>\r\n              <div class=\"column\">\r\n                <b-field\r\n                  label=\"Apellido*\"\r\n                  :type=\"{ 'is-danger': errors.has('lastName') }\"\r\n                  :message=\"errors.first('lastName')\"\r\n                >\r\n                  <b-input\r\n                    v-model=\"model.lastName\"\r\n                    name=\"lastName\"\r\n                    data-vv-as=\"apellido\"\r\n                    v-validate=\"'required'\"\r\n                    placeholder=\"Requerido\"\r\n                  />\r\n                </b-field>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"columns is-multiline\">\r\n              <div class=\"column\">\r\n                <b-field\r\n                  label=\"Segundo nombre\"\r\n                  :type=\"{ 'is-danger': errors.has('middleName') }\"\r\n                  :message=\"errors.first('middleName')\"\r\n                >\r\n                  <b-input\r\n                    v-model=\"model.middleName\"\r\n                    name=\"middleName\"\r\n                    placeholder=\"Opcional\"\r\n                  />\r\n                </b-field>\r\n              </div>\r\n              <div class=\"column\">\r\n                <b-field\r\n                  label=\"Segundo apellido\"\r\n                  :type=\"{ 'is-danger': errors.has('secondLastName') }\"\r\n                  :message=\"errors.first('secondLastName')\"\r\n                >\r\n                  <b-input\r\n                    v-model=\"model.secondLastName\"\r\n                    name=\"secondLastName\"\r\n                    placeholder=\"Opcional\"\r\n                  />\r\n                </b-field>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"columns is-multiline\">\r\n              <div class=\"column\">\r\n                <b-field\r\n                  label=\"Fecha de nacimiento*\"\r\n                  :type=\"{ 'is-danger': errors.has('dob') }\"\r\n                  :message=\"errors.first('dob')\"\r\n                >\r\n                  <b-datepicker\r\n                    v-model=\"model.dob\"\r\n                    name=\"dob\"\r\n                    data-vv-as=\"fecha de nacimiento\"\r\n                    v-validate=\"'required'\"\r\n                    placeholder=\"dd/MM/yyyy\"\r\n                    icon=\"calendar-today\"\r\n                    locale=\"es\"\r\n                  >\r\n                  </b-datepicker>\r\n                </b-field>\r\n              </div>\r\n              <div class=\"column\">\r\n                <b-field\r\n                  label=\"Sexo*\"\r\n                  :type=\"{ 'is-danger': errors.has('gender') }\"\r\n                  :message=\"errors.first('gender')\"\r\n                >\r\n                  <b-radio\r\n                    v-model=\"model.gender\"\r\n                    name=\"gender\"\r\n                    data-vv-as=\"sexo\"\r\n                    v-validate=\"'required'\"\r\n                    :native-value=\"0\"\r\n                  >\r\n                    Masculino\r\n                  </b-radio>\r\n                  <b-radio\r\n                    v-model=\"model.gender\"\r\n                    name=\"gender\"\r\n                    data-vv-as=\"sexo\"\r\n                    v-validate=\"'required'\"\r\n                    :native-value=\"1\"\r\n                  >\r\n                    Femenimo\r\n                  </b-radio>\r\n                </b-field>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"columns is-multiline\">\r\n              <div class=\"column\">\r\n                <b-field\r\n                  label=\"Tipo de documento*\"\r\n                  :type=\"{ 'is-danger': errors.has('documentType') }\"\r\n                  :message=\"errors.first('documentType')\"\r\n                >\r\n                  <b-select\r\n                    expanded\r\n                    v-model=\"model.documentType\"\r\n                    placeholder=\"Requerido\"\r\n                    data-vv-as=\"tipo de documento\"\r\n                    v-validate=\"'required'\"\r\n                  >\r\n                    <option :value=\"0\">Cédula</option>\r\n                    <option :value=\"1\">Pasaporte</option>\r\n                  </b-select>\r\n                </b-field>\r\n              </div>\r\n              <div class=\"column\">\r\n                <b-field\r\n                  label=\"Documento*\"\r\n                  :type=\"{ 'is-danger': errors.has('documentTypeValue') }\"\r\n                  :message=\"errors.first('documentTypeValue')\"\r\n                >\r\n                  <the-mask\r\n                    v-show=\"model.documentType === 0\"\r\n                    name=\"documentTypeValue\"\r\n                    data-vv-as=\"documento\"\r\n                    v-model=\"model.documentTypeValue\"\r\n                    :mask=\"'###-#######-#'\"\r\n                    v-validate=\"'required'\"\r\n                    type=\"text\"\r\n                    class=\"input\"\r\n                    :class=\"{ 'is-danger': errors.has('documentTypeValue') }\"\r\n                    placeholder=\"Requerido\"\r\n                  />\r\n\r\n                  <b-input\r\n                    v-if=\"model.documentType === 1\"\r\n                    v-model=\"model.documentTypeValue\"\r\n                    name=\"documentTypeValue\"\r\n                    data-vv-as=\"documento\"\r\n                    v-validate=\"'required'\"\r\n                    placeholder=\"Requerido\"\r\n                  />\r\n                </b-field>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </b-collapse>\r\n      <br />\r\n\r\n      <nav class=\"level\">\r\n        <!-- Left side -->\r\n        <div class=\"level-left\">\r\n          <p class=\"level-item\">\r\n            <b-button\r\n              :disabled=\"(modelDoNotChange && !errors.any()) || saving\"\r\n              size=\"is-medium\"\r\n              type=\"is-light\"\r\n              @click=\"clean\"\r\n              icon-right=\"eraser\"\r\n              >Reiniciar</b-button\r\n            >\r\n          </p>\r\n          <p class=\"level-item\">\r\n            <b-button\r\n              size=\"is-medium\"\r\n              type=\"is-danger\"\r\n              :disabled=\"saving\"\r\n              @click=\"cancel\"\r\n              icon-right=\"cancel\"\r\n              >Cancelar</b-button\r\n            >\r\n          </p>\r\n        </div>\r\n\r\n        <!-- Right side -->\r\n        <div class=\"level-right\">\r\n          <p class=\"level-item\">\r\n            <b-button\r\n              size=\"is-medium\"\r\n              type=\"is-primary\"\r\n              native-type=\"submit\"\r\n              :disabled=\"errors.any()\"\r\n              :loading=\"saving\"\r\n              icon-right=\"content-save\"\r\n              >Guardar</b-button\r\n            >\r\n          </p>\r\n        </div>\r\n      </nav>\r\n    </form>\r\n    <change-password :user-id=\"id\" :is-active.sync=\"isActiveChangePasswordModal\"></change-password>\r\n  </section>\r\n</template>\r\n<script lang=\"ts\">\r\nimport { Component, Mixins, Vue } from \"vue-property-decorator\";\r\nimport { BaseFormEditMixin } from \"@/mixins\";\r\nimport { User } from \"@/core/model\";\r\nimport { FileService } from \"@/core/services\";\r\nimport ChangePassword from \"@/components/auth/change-password.vue\";\r\n\r\n@Component({\r\n  components:{\r\n    'change-password':ChangePassword\r\n  }\r\n})\r\nexport default class UserEditComponent extends Mixins<BaseFormEditMixin<User>>(\r\n  BaseFormEditMixin\r\n) {\r\n  fileService = new FileService();\r\n  uploading = false;\r\n  successUpload = false;\r\n  errorUpload = false;\r\n  imageUrl = require(\"@/assets/sx-logo.png\");\r\n\r\n  isActiveChangePasswordModal = false;\r\n  constructor() {\r\n    super();\r\n    this.controller = \"User\";\r\n    this.model = new User();\r\n  }\r\n  async selectFile(selected: File) {\r\n    try {\r\n      this.uploading = true;\r\n      const document = await this.fileService.upload(selected);\r\n      this.model.photo = document.data;\r\n      this.imageUrl = this.fileService.getPublicUrl(\r\n        this.model.photo.fileName,\r\n        this.model.photo.contentType\r\n      );\r\n      this.successUpload = true;\r\n    } catch (error) {\r\n      this.errorUpload = true;\r\n      this.imageUrl = require(\"@/assets/sx-logo.png\");\r\n      this.operationFailed(\"Error al enviar foto al servidor\");\r\n    } finally {\r\n      this.uploading = false;\r\n    }\r\n  }\r\n\r\n  async getData() {\r\n    try {\r\n      if (this.modelToEdit && !this.loadFromAPI)\r\n        this.model = this.map<User>(this.modelToEdit);\r\n      else {\r\n        this.loading = true;\r\n        const response = await this.service.getById(this.id);\r\n        this.model = response.data;\r\n        this.model.dob = new Date(this.model.dob as string);\r\n      }\r\n      this.modelInit = this.map<User>(this.model);\r\n    } catch (errors) {\r\n      this.operationFailedErrors(errors);\r\n    } finally {\r\n      this.loading = false;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"css\">\r\n.p-2rem {\r\n  padding: 2rem;\r\n}\r\n</style>\r\n"]}]}