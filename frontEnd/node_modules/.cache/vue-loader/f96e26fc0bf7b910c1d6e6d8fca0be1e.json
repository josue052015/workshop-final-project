{"remainingRequest":"F:\\workshop-final-project\\workshop-final-project\\frontEnd\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\workshop-final-project\\workshop-final-project\\frontEnd\\src\\components\\auth\\change-password.vue?vue&type=script&lang=ts&","dependencies":[{"path":"F:\\workshop-final-project\\workshop-final-project\\frontEnd\\src\\components\\auth\\change-password.vue","mtime":1629085164627},{"path":"F:\\workshop-final-project\\workshop-final-project\\frontEnd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\workshop-final-project\\workshop-final-project\\frontEnd\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\workshop-final-project\\workshop-final-project\\frontEnd\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"F:\\workshop-final-project\\workshop-final-project\\frontEnd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\workshop-final-project\\workshop-final-project\\frontEnd\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQppbXBvcnQgeyBDb21wb25lbnQsIE1peGlucywgUHJvcCwgVnVlLCBXYXRjaCB9IGZyb20gInZ1ZS1wcm9wZXJ0eS1kZWNvcmF0b3IiOw0KaW1wb3J0IHsgQXV0aE1peGluLCBDb3JlTWl4aW4gfSBmcm9tICJAL21peGlucyI7DQppbXBvcnQgeyBJVXNlclNlcnZpY2UsIFVzZXJTZXJ2aWNlIH0gZnJvbSAiQC9jb3JlL3NlcnZpY2VzIjsNCmltcG9ydCB7IENoYW5nZVBhc3N3b3JkIH0gZnJvbSAiQC9jb3JlL21vZGVsIjsNCkBDb21wb25lbnQNCmV4cG9ydCBkZWZhdWx0IGNsYXNzIENoYW5nZVBhc3N3b3JkQ29tcG9uZW50IGV4dGVuZHMgTWl4aW5zKA0KICBBdXRoTWl4aW4sDQogIENvcmVNaXhpbg0KKSB7DQogIEBQcm9wKCkgcHVibGljIGlzQWN0aXZlITogYm9vbGVhbjsNCiAgQFByb3AoKSBwdWJsaWMgdXNlcklkITogbnVtYmVyOw0KDQogIG1vZGVsID0gbmV3IENoYW5nZVBhc3N3b3JkKCk7DQogIHVzZXJTZXJ2aWNlOiBJVXNlclNlcnZpY2UgPSBuZXcgVXNlclNlcnZpY2UoInVzZXIiKTsNCiAgYWN0aXZlID0gZmFsc2U7DQogIGxvYWRpbmcgPSBmYWxzZTsNCg0KICBAV2F0Y2goImlzQWN0aXZlIikNCiAgb25Jc0FjdGl2ZUNoYW5nZSh2YWx1ZTogYm9vbGVhbikgew0KICAgIHRoaXMuYWN0aXZlID0gdmFsdWU7DQogICAgdGhpcy5tb2RlbCA9IG5ldyBDaGFuZ2VQYXNzd29yZCgpOw0KICB9DQogIGNsb3NlKCkgew0KICAgIHRoaXMuJGVtaXQoInVwZGF0ZTppc0FjdGl2ZSIsIGZhbHNlKTsNCiAgfQ0KDQogIGFzeW5jIHZhbGlkYXRlKCkgew0KICAgIGxldCByZXN1bHQgPSBhd2FpdCB0aGlzLiR2YWxpZGF0b3IudmFsaWRhdGVBbGwoKTsNCiAgICBpZiAoIXJlc3VsdCkgew0KICAgICAgY29uc3QgZXJyb3JzID0gdGhpcy4kdmFsaWRhdG9yLmVycm9ycy5pdGVtcy5tYXAoKGUpID0+IGUubXNnKTsNCiAgICAgIHRoaXMub3BlcmF0aW9uRmFpbGVkRXJyb3JzKGVycm9ycyk7DQogICAgICByZXR1cm47DQogICAgfQ0KICAgIHRoaXMuY2hhbmdlUGFzc3dvcmQoKTsNCiAgfQ0KDQogIGFzeW5jIGNoYW5nZVBhc3N3b3JkKCkgew0KICAgIHRyeSB7DQogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOw0KICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnVzZXJTZXJ2aWNlLmNoYW5nZVBhc3N3b3JkKA0KICAgICAgICB0aGlzLnVzZXJJZCwNCiAgICAgICAgdGhpcy5tb2RlbA0KICAgICAgKTsNCiAgICAgIGlmIChyZXNwb25zZS5kYXRhLmlzU3VjY2Vzcykgew0KICAgICAgICB0aGlzLm9wZXJhdGlvblN1Y2Nlc3MoIkNvbnRyYXNlw7FhIGNhbWJpYWRhIGV4aXRvc2FtZW50ZSIpOw0KICAgICAgICB0aGlzLmNsb3NlKCk7DQogICAgICB9DQogICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgIHRoaXMub3BlcmF0aW9uRmFpbGVkKCJFcnJvciBhbCBjYW1iaWFyIGNvbnRyYXNlw7FhIik7DQogICAgfSBmaW5hbGx5IHsNCiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["change-password.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"change-password.vue","sourceRoot":"src/components/auth","sourcesContent":["<template>\r\n  <b-modal\r\n    @close=\"close\"\r\n    :active=\"active\"\r\n    :can-cancel=\"['x']\"\r\n    has-modal-card\r\n    trap-focus\r\n    :destroy-on-hide=\"false\"\r\n    aria-role=\"dialog\"\r\n    aria-label=\"Example Modal\"\r\n    aria-modal\r\n  >\r\n    <template #default>\r\n      <form action=\"\">\r\n        <div class=\"modal-card\" style=\"width: auto\">\r\n          <header class=\"modal-card-head\">\r\n            <p class=\"modal-card-title\">Cambiar contraseña</p>\r\n            <button type=\"button\" class=\"delete\" @click=\"$emit('close')\" />\r\n          </header>\r\n          <section class=\"modal-card-body\">\r\n            <b-field\r\n              label=\"Nueva contraseña*\"\r\n              :type=\"{ 'is-danger': errors.has('password') }\"\r\n              :message=\"errors.first('password')\"\r\n            >\r\n              <b-input\r\n                type=\"password\"\r\n                password-reveal\r\n                v-model=\"model.password\"\r\n                name=\"password\"\r\n                data-vv-as=\"contraseña\"\r\n                v-validate=\"'required'\"\r\n                placeholder=\"Requerido\"\r\n                ref=\"password\"\r\n              />\r\n            </b-field>\r\n\r\n            <b-field\r\n              label=\"Confirmar contraseña*\"\r\n              :type=\"{ 'is-danger': errors.has('confirmPassword') }\"\r\n              :message=\"errors.first('confirmPassword')\"\r\n            >\r\n              <b-input\r\n                type=\"password\"\r\n                password-reveal\r\n                v-model=\"model.confirmPassword\"\r\n                name=\"confirmPassword\"\r\n                data-vv-as=\"confirmar contraseña\"\r\n                v-validate=\"'confirmed:password'\"\r\n                placeholder=\"Requerido\"\r\n              />\r\n            </b-field>\r\n          </section>\r\n          <footer class=\"modal-card-foot\">\r\n            <b-button label=\"Cerrar\" @click=\"close\" />\r\n            <b-button\r\n              :loading=\"loading\"\r\n              :disabled=\"loading\"\r\n              @click=\"validate\"\r\n              label=\"Cambiar contraseña\"\r\n              type=\"is-primary\"\r\n            />\r\n          </footer>\r\n        </div>\r\n      </form>\r\n    </template>\r\n  </b-modal>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Mixins, Prop, Vue, Watch } from \"vue-property-decorator\";\r\nimport { AuthMixin, CoreMixin } from \"@/mixins\";\r\nimport { IUserService, UserService } from \"@/core/services\";\r\nimport { ChangePassword } from \"@/core/model\";\r\n@Component\r\nexport default class ChangePasswordComponent extends Mixins(\r\n  AuthMixin,\r\n  CoreMixin\r\n) {\r\n  @Prop() public isActive!: boolean;\r\n  @Prop() public userId!: number;\r\n\r\n  model = new ChangePassword();\r\n  userService: IUserService = new UserService(\"user\");\r\n  active = false;\r\n  loading = false;\r\n\r\n  @Watch(\"isActive\")\r\n  onIsActiveChange(value: boolean) {\r\n    this.active = value;\r\n    this.model = new ChangePassword();\r\n  }\r\n  close() {\r\n    this.$emit(\"update:isActive\", false);\r\n  }\r\n\r\n  async validate() {\r\n    let result = await this.$validator.validateAll();\r\n    if (!result) {\r\n      const errors = this.$validator.errors.items.map((e) => e.msg);\r\n      this.operationFailedErrors(errors);\r\n      return;\r\n    }\r\n    this.changePassword();\r\n  }\r\n\r\n  async changePassword() {\r\n    try {\r\n      this.loading = true;\r\n      const response = await this.userService.changePassword(\r\n        this.userId,\r\n        this.model\r\n      );\r\n      if (response.data.isSuccess) {\r\n        this.operationSuccess(\"Contraseña cambiada exitosamente\");\r\n        this.close();\r\n      }\r\n    } catch (error) {\r\n      this.operationFailed(\"Error al cambiar contraseña\");\r\n    } finally {\r\n      this.loading = false;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped lang=\"scss\">\r\n</style>\r\n"]}]}