{"remainingRequest":"F:\\workshop-final-project\\workshop-final-project\\frontEnd\\node_modules\\babel-loader\\lib\\index.js!F:\\workshop-final-project\\workshop-final-project\\frontEnd\\node_modules\\ts-loader\\index.js??ref--13-2!F:\\workshop-final-project\\workshop-final-project\\frontEnd\\src\\core\\services\\file.service.ts","dependencies":[{"path":"F:\\workshop-final-project\\workshop-final-project\\frontEnd\\src\\core\\services\\file.service.ts","mtime":1629085164764},{"path":"F:\\workshop-final-project\\workshop-final-project\\frontEnd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\workshop-final-project\\workshop-final-project\\frontEnd\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\workshop-final-project\\workshop-final-project\\frontEnd\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkY6L3dvcmtzaG9wLWZpbmFsLXByb2plY3Qvd29ya3Nob3AtZmluYWwtcHJvamVjdC9mcm9udEVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiRjovd29ya3Nob3AtZmluYWwtcHJvamVjdC93b3Jrc2hvcC1maW5hbC1wcm9qZWN0L2Zyb250RW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiRjovd29ya3Nob3AtZmluYWwtcHJvamVjdC93b3Jrc2hvcC1maW5hbC1wcm9qZWN0L2Zyb250RW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC5qcyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBzZXR0aW5ncyBmcm9tICJAL2NvcmUvdXRpbHMvYXBwLXNldHRpbmdzIjsKZXhwb3J0IHZhciBGaWxlU2VydmljZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gRmlsZVNlcnZpY2UoKSB7CiAgICB2YXIgY29udHJvbGxlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJ2ZpbGUnOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGaWxlU2VydmljZSk7CgogICAgdGhpcy5jb250cm9sbGVyID0gY29udHJvbGxlcjsKICAgIHRoaXMuYXBpVXJsID0gc2V0dGluZ3MuQVBJX1VSTCArICJhcGkvIiArIGNvbnRyb2xsZXIgKyAiLyI7CiAgfQoKICBfY3JlYXRlQ2xhc3MoRmlsZVNlcnZpY2UsIFt7CiAgICBrZXk6ICJ1cGxvYWRNYW55IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdXBsb2FkTWFueSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShmaWxlcykgewogICAgICAgIHZhciBhY3Rpb24sCiAgICAgICAgICAgIGRhdGEsCiAgICAgICAgICAgIHVybCwKICAgICAgICAgICAgX2FyZ3MgPSBhcmd1bWVudHM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgYWN0aW9uID0gX2FyZ3MubGVuZ3RoID4gMSAmJiBfYXJnc1sxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3NbMV0gOiAndXBsb2FkLW1hbnknOwogICAgICAgICAgICAgICAgZGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgICAgICAgZmlsZXMuZm9yRWFjaChmdW5jdGlvbiAoeCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5hcHBlbmQoJ2ZpbGVzJywgeCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHVybCA9ICIiLmNvbmNhdCh0aGlzLmFwaVVybCkuY29uY2F0KGFjdGlvbik7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KHVybCwgZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0LnNlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gdXBsb2FkTWFueShfeCkgewogICAgICAgIHJldHVybiBfdXBsb2FkTWFueS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gdXBsb2FkTWFueTsKICAgIH0oKQogIH0sIHsKICAgIGtleTogInVwbG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3VwbG9hZCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoZmlsZSkgewogICAgICAgIHZhciBhY3Rpb24sCiAgICAgICAgICAgIGRhdGEsCiAgICAgICAgICAgIHVybCwKICAgICAgICAgICAgX2FyZ3MyID0gYXJndW1lbnRzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBhY3Rpb24gPSBfYXJnczIubGVuZ3RoID4gMSAmJiBfYXJnczJbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmdzMlsxXSA6ICd1cGxvYWQnOwogICAgICAgICAgICAgICAgZGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgICAgICAgZGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTsKICAgICAgICAgICAgICAgIHVybCA9ICIiLmNvbmNhdCh0aGlzLmFwaVVybCkuY29uY2F0KGFjdGlvbik7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCh1cmwsIGRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQyLnNlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiB1cGxvYWQoX3gyKSB7CiAgICAgICAgcmV0dXJuIF91cGxvYWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHVwbG9hZDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImRvd25sb2FkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkb3dubG9hZChuYW1lLCBjb250ZW50VHlwZSkgewogICAgICB2YXIgYWN0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAnZG93bmxvYWQnOwogICAgICB2YXIgYmxhbmsgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHRydWU7CiAgICAgIHZhciB0YXJnZXQgPSBibGFuayA/ICdfYmxhbmsnIDogdW5kZWZpbmVkOwogICAgICB2YXIgdXJsID0gdGhpcy5nZXRQdWJsaWNVcmwobmFtZSwgY29udGVudFR5cGUsIGFjdGlvbik7CiAgICAgIHdpbmRvdy5vcGVuKHVybCwgdGFyZ2V0KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRQdWJsaWNVcmwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFB1YmxpY1VybChmaWxlTmFtZSwgY29udGVudFR5cGUpIHsKICAgICAgdmFyIGFjdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogJ2Rvd25sb2FkJzsKICAgICAgcmV0dXJuICIiLmNvbmNhdChzZXR0aW5ncy5BUElfVVJMLCAiYXBpL2ZpbGUvIikuY29uY2F0KGFjdGlvbiwgIj9maWxlTmFtZT0iKS5jb25jYXQoZmlsZU5hbWUsICImY29udGVudFR5cGU9IikuY29uY2F0KGNvbnRlbnRUeXBlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJFeHBvcnRDc3YiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9FeHBvcnRDc3YgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKGZpbGUsIGZpbGVOYW1lKSB7CiAgICAgICAgdmFyIHVybCwgbGluazsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW2ZpbGVdLCB7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0L2NzdicKICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgICAgICBsaW5rLmhyZWYgPSB1cmw7CiAgICAgICAgICAgICAgICBsaW5rLmRvd25sb2FkID0gIiIuY29uY2F0KGZpbGVOYW1lLCAiLmNzdiIpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTsKICAgICAgICAgICAgICAgIGxpbmsuY2xpY2soKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7IC8vZmllbAoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBFeHBvcnRDc3YoX3gzLCBfeDQpIHsKICAgICAgICByZXR1cm4gX0V4cG9ydENzdi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gRXhwb3J0Q3N2OwogICAgfSgpCiAgfV0pOwoKICByZXR1cm4gRmlsZVNlcnZpY2U7Cn0oKTs="},{"version":3,"sources":["F:\\workshop-final-project\\workshop-final-project\\frontEnd\\src\\core\\services\\file.service.ts"],"names":[],"mappings":"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","sourcesContent":["\r\nimport axios, { AxiosResponse } from \"axios\";\r\nimport settings from \"@/core/utils/app-settings\";\r\nimport { IDocument } from \"../model\";\r\nexport class FileService {\r\n    public apiUrl: string;\r\n    constructor(public controller: string = 'file') {\r\n        this.apiUrl = settings.API_URL + \"api/\" + controller + \"/\";\r\n    }\r\n    public async uploadMany(files: File[], action = 'upload-many'){\r\n        let data = new FormData();\r\n        files.forEach((x) => data.append('files', x));\r\n        const url = `${this.apiUrl}${action}`\r\n        return await axios.post<IDocument>(url, data);\r\n    }\r\n    public async upload(file: File, action = 'upload') {\r\n        let data = new FormData();\r\n        data.append('file', file);\r\n        const url = `${this.apiUrl}${action}`\r\n        return await axios.post<IDocument>(url, data);\r\n    }\r\n\r\n    public download(name: string, contentType:string, action = 'download', blank = true) {\r\n        let target = blank ? '_blank' : undefined;\r\n        const url = this.getPublicUrl(name, contentType, action);\r\n        window.open(url,target);\r\n    }\r\n    public getPublicUrl(fileName: string, contentType: string, action = 'download') {\r\n        return `${settings.API_URL}api/file/${action}?fileName=${fileName}&contentType=${contentType}`;\r\n    }\r\n\r\n    public async ExportCsv(file: File, fileName: string) {\r\n        const url = window.URL.createObjectURL(new Blob([file], { type: 'text/csv' }));\r\n        let link = document.createElement('a')\r\n        link.href = url;\r\n        link.download = `${fileName}.csv`;\r\n        document.body.appendChild(link);\r\n        link.click()\r\n        document.body.removeChild(link);\r\n        //fiel\r\n    }\r\n}\r\n"],"sourceRoot":""}]}